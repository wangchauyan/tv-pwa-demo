<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV PWA Demo</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body {
            background-color: #222;
            color: white;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden; /* Prevent page scrolling, focus on element movement */
        }

        h1 { margin-bottom: 30px; }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 200px); /* 2x2 layout */
            gap: 20px;
        }

        /* Interactive cards */
        .card {
            background-color: #444;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s, box-shadow 0.2s;

            /* Key: Remove default ugly blue outline */
            outline: none;
        }

        /* -------------------------------------------
           Most important CSS for TV development: Focus state
           When remote selects this element, there must be a visible change
        ------------------------------------------- */
        .card:focus {
            background-color: #0078D7; /* Color change */
            transform: scale(1.1);     /* Scale up (common TV interaction) */
            box-shadow: 0 0 20px rgba(0, 120, 215, 0.8); /* Glow effect */
            z-index: 10;
        }
    </style>
</head>
<body>

    <h1>Android TV PWA Demo</h1>

    <div class="grid-container">
        <div class="card" tabindex="0" id="item-1">Movie</div>
        <div class="card" tabindex="0" id="item-2">TV Show</div>
        <div class="card" tabindex="0" id="item-3">Settings</div>
        <div class="card" tabindex="0" id="item-4">Logout</div>
    </div>

    <script>
        // Register Service Worker (PWA requirement)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }

        // ----------------------------------------------------
        // Simple D-Pad navigation logic
        // ----------------------------------------------------

        // Get all focusable elements
        const items = document.querySelectorAll('.card');

        // Set initial focus on first element
        if (items.length > 0) {
            items[0].focus();
        }

        // Listen for keyboard events (remote control keys are essentially Keyboard Events)
        document.addEventListener('keydown', (e) => {
            const current = document.activeElement;
            const index = Array.from(items).indexOf(current);

            // If focus is not on our cards, return
            if (index === -1) return;

            let nextIndex = null;

            switch(e.key) {
                case 'ArrowRight': // Remote right key
                    if (index % 2 === 0) nextIndex = index + 1; // Simple 2-column logic
                    break;
                case 'ArrowLeft':  // Remote left key
                    if (index % 2 !== 0) nextIndex = index - 1;
                    break;
                case 'ArrowDown':  // Remote down key
                    if (index + 2 < items.length) nextIndex = index + 2;
                    break;
                case 'ArrowUp':    // Remote up key
                    if (index - 2 >= 0) nextIndex = index - 2;
                    break;
                case 'Enter':      // Remote confirm key (OK)
                    alert(`You clicked: ${current.innerText}`);
                    break;
            }

            if (nextIndex !== null) {
                e.preventDefault(); // Prevent browser default scrolling
                items[nextIndex].focus(); // Move focus to next element
            }
        });
    </script>
</body>
</html>
